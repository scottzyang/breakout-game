(()=>{"use strict";const t=class{constructor(t=0,s=0,i=100,h=100,e="#f00"){this.x=t,this.y=s,this.width=i,this.height=h,this.color=e}render(t){t.beginPath(),t.rect(this.x,this.y,this.width,this.height),t.fillStyle=this.color,t.fill(),t.closePath()}},s=class extends t{constructor(t=0,s=0,i=10,h="#00447c"){super(t,s,0,0,h),this.radius=i,this.dx=2,this.dy=-2}move(){this.x+=this.dx,this.y+=this.dy}render(t){t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.fillStyle=this.color,t.fill(),t.closePath()}},i=class extends t{constructor(t,s,i="#0095DD",h=75,e=20){super(t,s,h,e,i),this.status=1,this.isBall=!1}},h=class extends t{constructor(t,s,i=0,h=75,e=10,l="#800080"){super(s,i,h,e,l),this.canvas=t,this.rightPressed=!1,this.leftPressed=!1,document.addEventListener("keydown",(t=>{this.keyDownHandler(t)}),!1),document.addEventListener("keyup",(t=>{this.keyUpHandler(t)}),!1),document.addEventListener("mousemove",(t=>{this.mouseMoveHandler(t)}),!1)}keyDownHandler(t){"Right"===t.key||"ArrowRight"===t.key?this.rightPressed=!0:"Left"!==t.key&&"ArrowLeft"!==t.key||(this.leftPressed=!0)}keyUpHandler(t){"Right"===t.key||"ArrowRight"===t.key?this.rightPressed=!1:"Left"!==t.key&&"ArrowLeft"!==t.key||(this.leftPressed=!1)}mouseMoveHandler(t){const s=t.clientX-this.canvas.offsetLeft;s>0&&s<this.canvas.width&&(this.x=s-this.width/2)}},e=class extends t{constructor(t=8,s=20,i="#f44336",h=0,e="16px Arial"){super(t,s),this.color=i,this.score=h,this.font=e}render(t){t.font=this.font,t.fillStyle=this.color,t.fillText(`Score: ${this.score}`,this.x,this.y)}update(t){this.score+=t}reset(){this.score=0}},l=class extends t{constructor(t,s=20,i="#f44336",h=3,e="16px Arial"){super(t,s),this.color=i,this.lives=h,this.font=e}update(t){this.lives-=t}render(t){t.font=this.font,t.fillStyle=this.color,t.fillText(`Lives: ${this.lives}`,this.x,this.y)}},a=document.getElementById("myCanvas"),r=a.getContext("2d");new class{constructor(t,a){this.canvas=t,this.ctx=a,this.ballX=this.canvas.width/2,this.ballY=this.canvas.height-30,this.ball=new s(this.ballX,this.ballY),this.brickGroup=new class{constructor(t,s=[],i=5,h=3,e=75,l=20,a=10,r=30){this.ctx=t,this.bricks=s,this.column=i,this.row=h,this.width=e,this.height=l,this.padding=a,this.offset=r,this.rowColor=["#f44336","#ffa500","#8fce00"]}initializeBricks(){for(let t=0;t<this.column;t+=1){this.bricks[t]=[];for(let s=0;s<this.column;s+=1){const h=t*(this.width+this.padding)+this.offset,e=s*(this.height+this.padding)+this.offset;this.bricks[t][s]=new i(h,e,this.rowColor[s])}}}drawBricks(){for(let t=0;t<this.column;t+=1)for(let s=0;s<this.row;s+=1){const i=this.bricks[t][s];1===i.status&&i.render(this.ctx)}}}(this.ctx),this.brickGroup.initializeBricks(),this.paddleHeight=10,this.paddleWidth=75,this.paddleX=this.canvas.width-this.paddleWidth/2,this.paddleY=this.canvas.height-this.paddleHeight,this.paddle=new h(this.canvas,this.paddleX,this.paddleY),this.livesX=this.canvas.width-65,this.lives=new l(this.livesX),this.score=new e}collisionDetection(){for(let t=0;t<this.brickGroup.column;t+=1)for(let s=0;s<this.brickGroup.row;s+=1){const i=this.brickGroup.bricks[t][s];1===i.status&&this.ball.x>i.x&&this.ball.x<i.x+this.brickGroup.width&&this.ball.y>i.y&&this.ball.y<i.y+this.brickGroup.height&&(this.ball.dy=-this.ball.dy,i.status=0,this.score.update(1),this.score.score===this.brickGroup.row*this.brickGroup.column&&(alert("YOU WIN, CONGRATULATIONS!"),document.location.reload()))}}run(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.brickGroup.drawBricks(),this.ball.render(this.ctx),this.paddle.render(this.ctx),this.collisionDetection(),this.score.render(this.ctx),this.lives.render(this.ctx),(this.ball.x+this.ball.dx>this.canvas.width-this.ball.radius||this.ball.x+this.ball.dx<this.ball.radius)&&(this.ball.dx=-this.ball.dx),this.ball.y+this.ball.dy<this.ball.radius?this.ball.dy=-this.ball.dy:this.ball.y+this.ball.dy>this.canvas.height-this.ball.radius&&(this.ball.x>this.paddle.x&&this.ball.x<this.paddle.x+this.paddle.width?this.ball.dy=-this.ball.dy:(this.lives.update(1),this.lives.lives?(this.ball.x=this.canvas.width/2,this.ball.y=this.canvas.height-30,this.ball.dx=2,this.ball.dy=-2,this.paddle.x=(this.canvas.width-this.paddle.width)/2):(alert("GAME OVER"),document.location.reload()))),this.paddle.rightPressed?this.paddle.x=Math.min(this.paddle.x+7,this.canvas.width-this.paddle.width):this.paddle.leftPressed&&(this.paddle.x=Math.max(this.paddle.x-7,0)),this.ball.move(),requestAnimationFrame((()=>{this.run()}))}}(a,r).run()})();